                                      1 ;--------------------------------------------------------
                                      2 ; File Created by SDCC : free open source ANSI-C Compiler
                                      3 ; Version 4.2.0 #13081 (MINGW64)
                                      4 ;--------------------------------------------------------
                                      5 	.module psg
                                      6 	.optsdcc -mz80
                                      7 	
                                      8 ;--------------------------------------------------------
                                      9 ; Public variables in this module
                                     10 ;--------------------------------------------------------
                                     11 	.globl _g_PSG_VolumeBackup
                                     12 	.globl _g_PSG_Regs
                                     13 	.globl _PSG_SetRegister
                                     14 	.globl _PSG_GetRegister
                                     15 	.globl _PSG_SetTone
                                     16 	.globl _PSG_SetNoise
                                     17 	.globl _PSG_SetMixer
                                     18 	.globl _PSG_SetVolume
                                     19 	.globl _PSG_SetEnvelope
                                     20 	.globl _PSG_SetShape
                                     21 	.globl _PSG_EnableTone
                                     22 	.globl _PSG_EnableNoise
                                     23 	.globl _PSG_EnableEnvelope
                                     24 	.globl _PSG_Mute
                                     25 	.globl _PSG_Resume
                                     26 	.globl _PSG_Apply
                                     27 ;--------------------------------------------------------
                                     28 ; special function registers
                                     29 ;--------------------------------------------------------
                         000000A8    30 _g_PortPrimarySlot	=	0x00a8
                         000000A9    31 _g_PortReadKeyboard	=	0x00a9
                         000000AA    32 _g_PortAccessKeyboard	=	0x00aa
                         000000AB    33 _g_PortControl	=	0x00ab
                         00000098    34 _g_VDP_DataPort	=	0x0098
                         00000099    35 _g_VDP_RegPort	=	0x0099
                         00000099    36 _g_VDP_AddrPort	=	0x0099
                         00000099    37 _g_VDP_StatPort	=	0x0099
                         000000A0    38 _g_PSG_RegPort	=	0x00a0
                         000000A1    39 _g_PSG_DataPort	=	0x00a1
                         000000A2    40 _g_PSG_StatPort	=	0x00a2
                         00000010    41 _g_PSG_Ext_RegPort	=	0x0010
                         00000011    42 _g_PSG_Ext_DataPort	=	0x0011
                         00000012    43 _g_PSG_Ext_StatPort	=	0x0012
                         0000007C    44 _g_MSXMusic_IndexPort	=	0x007c
                         0000007D    45 _g_MSXMusic_DataPort	=	0x007d
                         000000C0    46 _g_MSXAudio_IndexPort	=	0x00c0
                         000000C1    47 _g_MSXAudio_DataPort	=	0x00c1
                         000000C2    48 _g_MSXAudio_IndexPort2	=	0x00c2
                         000000C3    49 _g_MSXAudio_DataPort2	=	0x00c3
                         000000B4    50 _g_RTC_AddrPort	=	0x00b4
                         000000B5    51 _g_RTC_DataPort	=	0x00b5
                                     52 ;--------------------------------------------------------
                                     53 ; ram data
                                     54 ;--------------------------------------------------------
                                     55 	.area _DATA
    00000000                         56 _g_PSG_Regs::
    00000000                         57 	.ds 16
    00000010                         58 _g_PSG_VolumeBackup::
    00000010                         59 	.ds 3
                                     60 ;--------------------------------------------------------
                                     61 ; ram data
                                     62 ;--------------------------------------------------------
                                     63 	.area _INITIALIZED
                                     64 ;--------------------------------------------------------
                                     65 ; absolute external ram data
                                     66 ;--------------------------------------------------------
                                     67 	.area _DABS (ABS)
                                     68 ;--------------------------------------------------------
                                     69 ; global & static initialisations
                                     70 ;--------------------------------------------------------
                                     71 	.area _HOME
                                     72 	.area _GSINIT
                                     73 	.area _GSFINAL
                                     74 	.area _GSINIT
                                     75 ;--------------------------------------------------------
                                     76 ; Home
                                     77 ;--------------------------------------------------------
                                     78 	.area _HOME
                                     79 	.area _HOME
                                     80 ;--------------------------------------------------------
                                     81 ; code
                                     82 ;--------------------------------------------------------
                                     83 	.area _CODE
                                     84 ;E:\Dropbox\FAUSTO\SVILUPPI\MSX\CODE\C\MSXgl\engine/src/psg.c:60: void PSG_SetRegister(u8 reg, u8 value)
                                     85 ;	---------------------------------
                                     86 ; Function PSG_SetRegister
                                     87 ; ---------------------------------
    00000000                         88 _PSG_SetRegister::
    00000000 5F               [ 4]   89 	ld	e, a
    00000001 4D               [ 4]   90 	ld	c, l
                                     91 ;E:\Dropbox\FAUSTO\SVILUPPI\MSX\CODE\C\MSXgl\engine/src/psg.c:64: u8* ptr = (u8*)g_PSG_Regs;
    00000002 21r00r00         [10]   92 	ld	hl, #_g_PSG_Regs+0
                                     93 ;E:\Dropbox\FAUSTO\SVILUPPI\MSX\CODE\C\MSXgl\engine/src/psg.c:65: ptr += reg;
    00000005 16 00            [ 7]   94 	ld	d, #0x00
    00000007 19               [11]   95 	add	hl, de
                                     96 ;E:\Dropbox\FAUSTO\SVILUPPI\MSX\CODE\C\MSXgl\engine/src/psg.c:66: *ptr = value;
    00000008 71               [ 7]   97 	ld	(hl), c
                                     98 ;E:\Dropbox\FAUSTO\SVILUPPI\MSX\CODE\C\MSXgl\engine/src/psg.c:74: }
    00000009 C9               [10]   99 	ret
                                    100 ;E:\Dropbox\FAUSTO\SVILUPPI\MSX\CODE\C\MSXgl\engine/src/psg.c:78: u8 PSG_GetRegister(u8 reg)
                                    101 ;	---------------------------------
                                    102 ; Function PSG_GetRegister
                                    103 ; ---------------------------------
    0000000A                        104 _PSG_GetRegister::
    0000000A 5F               [ 4]  105 	ld	e, a
                                    106 ;E:\Dropbox\FAUSTO\SVILUPPI\MSX\CODE\C\MSXgl\engine/src/psg.c:82: u8* ptr = (u8*)g_PSG_Regs;
    0000000B 21r00r00         [10]  107 	ld	hl, #_g_PSG_Regs+0
                                    108 ;E:\Dropbox\FAUSTO\SVILUPPI\MSX\CODE\C\MSXgl\engine/src/psg.c:83: ptr += reg;
    0000000E 16 00            [ 7]  109 	ld	d, #0x00
    00000010 19               [11]  110 	add	hl, de
                                    111 ;E:\Dropbox\FAUSTO\SVILUPPI\MSX\CODE\C\MSXgl\engine/src/psg.c:84: return *ptr;
    00000011 7E               [ 7]  112 	ld	a, (hl)
                                    113 ;E:\Dropbox\FAUSTO\SVILUPPI\MSX\CODE\C\MSXgl\engine/src/psg.c:92: }
    00000012 C9               [10]  114 	ret
                                    115 ;E:\Dropbox\FAUSTO\SVILUPPI\MSX\CODE\C\MSXgl\engine/src/psg.c:98: void PSG_SetTone(u8 chan, u16 period)
                                    116 ;	---------------------------------
                                    117 ; Function PSG_SetTone
                                    118 ; ---------------------------------
    00000013                        119 _PSG_SetTone::
    00000013 4F               [ 4]  120 	ld	c, a
                                    121 ;E:\Dropbox\FAUSTO\SVILUPPI\MSX\CODE\C\MSXgl\engine/src/psg.c:102: u8* ptr = (u8*)g_PSG_Regs;
    00000014 21r00r00         [10]  122 	ld	hl, #_g_PSG_Regs+0
                                    123 ;E:\Dropbox\FAUSTO\SVILUPPI\MSX\CODE\C\MSXgl\engine/src/psg.c:103: ptr += (chan * 2);
    00000017 06 00            [ 7]  124 	ld	b, #0x00
    00000019 CB 21            [ 8]  125 	sla	c
    0000001B CB 10            [ 8]  126 	rl	b
    0000001D 09               [11]  127 	add	hl, bc
                                    128 ;E:\Dropbox\FAUSTO\SVILUPPI\MSX\CODE\C\MSXgl\engine/src/psg.c:104: *ptr = (u8)period;
    0000001E 73               [ 7]  129 	ld	(hl), e
                                    130 ;E:\Dropbox\FAUSTO\SVILUPPI\MSX\CODE\C\MSXgl\engine/src/psg.c:105: *++ptr = (u8)(period >> 8);
    0000001F 23               [ 6]  131 	inc	hl
    00000020 72               [ 7]  132 	ld	(hl), d
                                    133 ;E:\Dropbox\FAUSTO\SVILUPPI\MSX\CODE\C\MSXgl\engine/src/psg.c:116: }
    00000021 C9               [10]  134 	ret
                                    135 ;E:\Dropbox\FAUSTO\SVILUPPI\MSX\CODE\C\MSXgl\engine/src/psg.c:120: void PSG_SetNoise(u8 period)
                                    136 ;	---------------------------------
                                    137 ; Function PSG_SetNoise
                                    138 ; ---------------------------------
    00000022                        139 _PSG_SetNoise::
    00000022 4F               [ 4]  140 	ld	c, a
                                    141 ;E:\Dropbox\FAUSTO\SVILUPPI\MSX\CODE\C\MSXgl\engine/src/psg.c:124: u8* ptr = (u8*)g_PSG_Regs + PSG_REG_NOISE;
    00000023 11r00r00         [10]  142 	ld	de, #_g_PSG_Regs+0
    00000026 21 06 00         [10]  143 	ld	hl, #0x0006
    00000029 19               [11]  144 	add	hl, de
                                    145 ;E:\Dropbox\FAUSTO\SVILUPPI\MSX\CODE\C\MSXgl\engine/src/psg.c:125: *ptr = period;
    0000002A 71               [ 7]  146 	ld	(hl), c
                                    147 ;E:\Dropbox\FAUSTO\SVILUPPI\MSX\CODE\C\MSXgl\engine/src/psg.c:133: }
    0000002B C9               [10]  148 	ret
                                    149 ;E:\Dropbox\FAUSTO\SVILUPPI\MSX\CODE\C\MSXgl\engine/src/psg.c:137: void PSG_SetMixer(u8 mix)
                                    150 ;	---------------------------------
                                    151 ; Function PSG_SetMixer
                                    152 ; ---------------------------------
    0000002C                        153 _PSG_SetMixer::
    0000002C 4F               [ 4]  154 	ld	c, a
                                    155 ;E:\Dropbox\FAUSTO\SVILUPPI\MSX\CODE\C\MSXgl\engine/src/psg.c:141: u8* ptr = (u8*)g_PSG_Regs + PSG_REG_MIXER;
    0000002D 11r00r00         [10]  156 	ld	de, #_g_PSG_Regs+0
    00000030 21 07 00         [10]  157 	ld	hl, #0x0007
    00000033 19               [11]  158 	add	hl, de
                                    159 ;E:\Dropbox\FAUSTO\SVILUPPI\MSX\CODE\C\MSXgl\engine/src/psg.c:142: *ptr = ~mix; // with PSG_INDIRECT bit #6 & #7 are handled in PSG_Apply() function
    00000034 79               [ 4]  160 	ld	a, c
    00000035 2F               [ 4]  161 	cpl
    00000036 77               [ 7]  162 	ld	(hl), a
                                    163 ;E:\Dropbox\FAUSTO\SVILUPPI\MSX\CODE\C\MSXgl\engine/src/psg.c:150: }
    00000037 C9               [10]  164 	ret
                                    165 ;E:\Dropbox\FAUSTO\SVILUPPI\MSX\CODE\C\MSXgl\engine/src/psg.c:154: void PSG_SetVolume(u8 chan, u8 vol)
                                    166 ;	---------------------------------
                                    167 ; Function PSG_SetVolume
                                    168 ; ---------------------------------
    00000038                        169 _PSG_SetVolume::
    00000038 47               [ 4]  170 	ld	b, a
    00000039 4D               [ 4]  171 	ld	c, l
                                    172 ;E:\Dropbox\FAUSTO\SVILUPPI\MSX\CODE\C\MSXgl\engine/src/psg.c:158: u8* ptr = (u8*)g_PSG_Regs + PSG_REG_AMP_A;
    0000003A 11r00r00         [10]  173 	ld	de, #_g_PSG_Regs+0
    0000003D 21 08 00         [10]  174 	ld	hl, #0x0008
    00000040 19               [11]  175 	add	hl, de
                                    176 ;E:\Dropbox\FAUSTO\SVILUPPI\MSX\CODE\C\MSXgl\engine/src/psg.c:159: ptr += chan;
    00000041 58               [ 4]  177 	ld	e, b
    00000042 16 00            [ 7]  178 	ld	d, #0x00
    00000044 19               [11]  179 	add	hl, de
                                    180 ;E:\Dropbox\FAUSTO\SVILUPPI\MSX\CODE\C\MSXgl\engine/src/psg.c:160: *ptr = vol;
    00000045 71               [ 7]  181 	ld	(hl), c
                                    182 ;E:\Dropbox\FAUSTO\SVILUPPI\MSX\CODE\C\MSXgl\engine/src/psg.c:168: }
    00000046 C9               [10]  183 	ret
                                    184 ;E:\Dropbox\FAUSTO\SVILUPPI\MSX\CODE\C\MSXgl\engine/src/psg.c:172: void PSG_SetEnvelope(u16 period)
                                    185 ;	---------------------------------
                                    186 ; Function PSG_SetEnvelope
                                    187 ; ---------------------------------
    00000047                        188 _PSG_SetEnvelope::
    00000047 EB               [ 4]  189 	ex	de, hl
                                    190 ;E:\Dropbox\FAUSTO\SVILUPPI\MSX\CODE\C\MSXgl\engine/src/psg.c:176: g_PSG_Regs.Envelope = period;
    00000048 ED 53r0Br00      [20]  191 	ld	((_g_PSG_Regs + 11)), de
                                    192 ;E:\Dropbox\FAUSTO\SVILUPPI\MSX\CODE\C\MSXgl\engine/src/psg.c:187: }
    0000004C C9               [10]  193 	ret
                                    194 ;E:\Dropbox\FAUSTO\SVILUPPI\MSX\CODE\C\MSXgl\engine/src/psg.c:191: void PSG_SetShape(u8 shape)
                                    195 ;	---------------------------------
                                    196 ; Function PSG_SetShape
                                    197 ; ---------------------------------
    0000004D                        198 _PSG_SetShape::
    0000004D 4F               [ 4]  199 	ld	c, a
                                    200 ;E:\Dropbox\FAUSTO\SVILUPPI\MSX\CODE\C\MSXgl\engine/src/psg.c:195: g_PSG_Regs.Shape = shape;
    0000004E 21r0Dr00         [10]  201 	ld	hl, #(_g_PSG_Regs + 13)
    00000051 71               [ 7]  202 	ld	(hl), c
                                    203 ;E:\Dropbox\FAUSTO\SVILUPPI\MSX\CODE\C\MSXgl\engine/src/psg.c:203: }
    00000052 C9               [10]  204 	ret
                                    205 ;E:\Dropbox\FAUSTO\SVILUPPI\MSX\CODE\C\MSXgl\engine/src/psg.c:207: void PSG_EnableTone(u8 chan, bool val)
                                    206 ;	---------------------------------
                                    207 ; Function PSG_EnableTone
                                    208 ; ---------------------------------
    00000053                        209 _PSG_EnableTone::
    00000053 5F               [ 4]  210 	ld	e, a
    00000054 4D               [ 4]  211 	ld	c, l
                                    212 ;E:\Dropbox\FAUSTO\SVILUPPI\MSX\CODE\C\MSXgl\engine/src/psg.c:210: u8 mix = g_PSG_Regs.Mixer;
    00000055 21r07r00         [10]  213 	ld	hl, #_g_PSG_Regs+7
    00000058 56               [ 7]  214 	ld	d, (hl)
                                    215 ;E:\Dropbox\FAUSTO\SVILUPPI\MSX\CODE\C\MSXgl\engine/src/psg.c:216: u8 bit = 1 << chan;
    00000059 43               [ 4]  216 	ld	b, e
    0000005A 1E 01            [ 7]  217 	ld	e, #0x01
    0000005C 04               [ 4]  218 	inc	b
    0000005D C3r62r00         [10]  219 	jp	00111$
    00000060                        220 00110$:
    00000060 CB 23            [ 8]  221 	sla	e
    00000062                        222 00111$:
    00000062 10 FC            [13]  223 	djnz	00110$
                                    224 ;E:\Dropbox\FAUSTO\SVILUPPI\MSX\CODE\C\MSXgl\engine/src/psg.c:217: mix &= ~bit;
    00000064 7B               [ 4]  225 	ld	a, e
    00000065 2F               [ 4]  226 	cpl
    00000066 A2               [ 4]  227 	and	a, d
                                    228 ;E:\Dropbox\FAUSTO\SVILUPPI\MSX\CODE\C\MSXgl\engine/src/psg.c:219: if (val == 0)
    00000067 0C               [ 4]  229 	inc	c
    00000068 0D               [ 4]  230 	dec	c
    00000069 20 01            [12]  231 	jr	NZ, 00102$
                                    232 ;E:\Dropbox\FAUSTO\SVILUPPI\MSX\CODE\C\MSXgl\engine/src/psg.c:220: mix |= bit;
    0000006B B3               [ 4]  233 	or	a, e
    0000006C                        234 00102$:
                                    235 ;E:\Dropbox\FAUSTO\SVILUPPI\MSX\CODE\C\MSXgl\engine/src/psg.c:223: g_PSG_Regs.Mixer = mix;
    0000006C 77               [ 7]  236 	ld	(hl), a
                                    237 ;E:\Dropbox\FAUSTO\SVILUPPI\MSX\CODE\C\MSXgl\engine/src/psg.c:227: }
    0000006D C9               [10]  238 	ret
                                    239 ;E:\Dropbox\FAUSTO\SVILUPPI\MSX\CODE\C\MSXgl\engine/src/psg.c:231: void PSG_EnableNoise(u8 chan, bool val)
                                    240 ;	---------------------------------
                                    241 ; Function PSG_EnableNoise
                                    242 ; ---------------------------------
    0000006E                        243 _PSG_EnableNoise::
    0000006E 5F               [ 4]  244 	ld	e, a
    0000006F 4D               [ 4]  245 	ld	c, l
                                    246 ;E:\Dropbox\FAUSTO\SVILUPPI\MSX\CODE\C\MSXgl\engine/src/psg.c:234: u8 mix = g_PSG_Regs.Mixer;
    00000070 21r07r00         [10]  247 	ld	hl, #_g_PSG_Regs+7
    00000073 56               [ 7]  248 	ld	d, (hl)
                                    249 ;E:\Dropbox\FAUSTO\SVILUPPI\MSX\CODE\C\MSXgl\engine/src/psg.c:240: u8 bit = 8 << chan;
    00000074 43               [ 4]  250 	ld	b, e
    00000075 1E 08            [ 7]  251 	ld	e, #0x08
    00000077 04               [ 4]  252 	inc	b
    00000078 C3r7Dr00         [10]  253 	jp	00111$
    0000007B                        254 00110$:
    0000007B CB 23            [ 8]  255 	sla	e
    0000007D                        256 00111$:
    0000007D 10 FC            [13]  257 	djnz	00110$
                                    258 ;E:\Dropbox\FAUSTO\SVILUPPI\MSX\CODE\C\MSXgl\engine/src/psg.c:241: mix &= ~bit;
    0000007F 7B               [ 4]  259 	ld	a, e
    00000080 2F               [ 4]  260 	cpl
    00000081 A2               [ 4]  261 	and	a, d
                                    262 ;E:\Dropbox\FAUSTO\SVILUPPI\MSX\CODE\C\MSXgl\engine/src/psg.c:243: if (val == 0)
    00000082 0C               [ 4]  263 	inc	c
    00000083 0D               [ 4]  264 	dec	c
    00000084 20 01            [12]  265 	jr	NZ, 00102$
                                    266 ;E:\Dropbox\FAUSTO\SVILUPPI\MSX\CODE\C\MSXgl\engine/src/psg.c:244: mix |= bit;
    00000086 B3               [ 4]  267 	or	a, e
    00000087                        268 00102$:
                                    269 ;E:\Dropbox\FAUSTO\SVILUPPI\MSX\CODE\C\MSXgl\engine/src/psg.c:247: g_PSG_Regs.Mixer = mix;
    00000087 77               [ 7]  270 	ld	(hl), a
                                    271 ;E:\Dropbox\FAUSTO\SVILUPPI\MSX\CODE\C\MSXgl\engine/src/psg.c:251: }
    00000088 C9               [10]  272 	ret
                                    273 ;E:\Dropbox\FAUSTO\SVILUPPI\MSX\CODE\C\MSXgl\engine/src/psg.c:255: void PSG_EnableEnvelope(u8 chan, bool val)
                                    274 ;	---------------------------------
                                    275 ; Function PSG_EnableEnvelope
                                    276 ; ---------------------------------
    00000089                        277 _PSG_EnableEnvelope::
    00000089 5F               [ 4]  278 	ld	e, a
    0000008A 45               [ 4]  279 	ld	b, l
                                    280 ;E:\Dropbox\FAUSTO\SVILUPPI\MSX\CODE\C\MSXgl\engine/src/psg.c:258: u8 vol = g_PSG_Regs.Volume[chan];
    0000008B 21r08r00         [10]  281 	ld	hl, #_g_PSG_Regs+8
    0000008E 16 00            [ 7]  282 	ld	d, #0x00
    00000090 19               [11]  283 	add	hl, de
    00000091 7E               [ 7]  284 	ld	a, (hl)
                                    285 ;E:\Dropbox\FAUSTO\SVILUPPI\MSX\CODE\C\MSXgl\engine/src/psg.c:264: vol &= 0x0F;
    00000092 E6 0F            [ 7]  286 	and	a, #0x0f
    00000094 4F               [ 4]  287 	ld	c, a
                                    288 ;E:\Dropbox\FAUSTO\SVILUPPI\MSX\CODE\C\MSXgl\engine/src/psg.c:266: if (val != 0)
    00000095 78               [ 4]  289 	ld	a, b
    00000096 B7               [ 4]  290 	or	a, a
    00000097 28 02            [12]  291 	jr	Z, 00102$
                                    292 ;E:\Dropbox\FAUSTO\SVILUPPI\MSX\CODE\C\MSXgl\engine/src/psg.c:267: vol |= PSG_F_ENV;
    00000099 CB E1            [ 8]  293 	set	4, c
    0000009B                        294 00102$:
                                    295 ;E:\Dropbox\FAUSTO\SVILUPPI\MSX\CODE\C\MSXgl\engine/src/psg.c:270: g_PSG_Regs.Volume[chan] = vol;
    0000009B 71               [ 7]  296 	ld	(hl), c
                                    297 ;E:\Dropbox\FAUSTO\SVILUPPI\MSX\CODE\C\MSXgl\engine/src/psg.c:274: }
    0000009C C9               [10]  298 	ret
                                    299 ;E:\Dropbox\FAUSTO\SVILUPPI\MSX\CODE\C\MSXgl\engine/src/psg.c:280: void PSG_Mute()
                                    300 ;	---------------------------------
                                    301 ; Function PSG_Mute
                                    302 ; ---------------------------------
    0000009D                        303 _PSG_Mute::
                                    304 ;E:\Dropbox\FAUSTO\SVILUPPI\MSX\CODE\C\MSXgl\engine/src/psg.c:284: loop(i, 3)
    0000009D 0E 00            [ 7]  305 	ld	c, #0x00
    0000009F                        306 00103$:
    0000009F 79               [ 4]  307 	ld	a, c
    000000A0 D6 03            [ 7]  308 	sub	a, #0x03
    000000A2 D0               [11]  309 	ret	NC
                                    310 ;E:\Dropbox\FAUSTO\SVILUPPI\MSX\CODE\C\MSXgl\engine/src/psg.c:287: g_PSG_VolumeBackup[i] = g_PSG_Regs.Volume[i];
    000000A3 21r10r00         [10]  311 	ld	hl, #_g_PSG_VolumeBackup
    000000A6 06 00            [ 7]  312 	ld	b, #0x00
    000000A8 09               [11]  313 	add	hl, bc
    000000A9 3Er08            [ 7]  314 	ld	a, #<((_g_PSG_Regs + 8))
    000000AB 81               [ 4]  315 	add	a, c
    000000AC 5F               [ 4]  316 	ld	e, a
    000000AD 3Es00            [ 7]  317 	ld	a, #>((_g_PSG_Regs + 8))
    000000AF CE 00            [ 7]  318 	adc	a, #0x00
    000000B1 57               [ 4]  319 	ld	d, a
    000000B2 1A               [ 7]  320 	ld	a, (de)
    000000B3 77               [ 7]  321 	ld	(hl), a
                                    322 ;E:\Dropbox\FAUSTO\SVILUPPI\MSX\CODE\C\MSXgl\engine/src/psg.c:289: g_PSG_Regs.Volume[i] = 0;
    000000B4 AF               [ 4]  323 	xor	a, a
    000000B5 12               [ 7]  324 	ld	(de), a
                                    325 ;E:\Dropbox\FAUSTO\SVILUPPI\MSX\CODE\C\MSXgl\engine/src/psg.c:284: loop(i, 3)
    000000B6 0C               [ 4]  326 	inc	c
                                    327 ;E:\Dropbox\FAUSTO\SVILUPPI\MSX\CODE\C\MSXgl\engine/src/psg.c:304: }
    000000B7 C3r9Fr00         [10]  328 	jp	00103$
                                    329 ;E:\Dropbox\FAUSTO\SVILUPPI\MSX\CODE\C\MSXgl\engine/src/psg.c:309: void PSG_Resume()
                                    330 ;	---------------------------------
                                    331 ; Function PSG_Resume
                                    332 ; ---------------------------------
    000000BA                        333 _PSG_Resume::
                                    334 ;E:\Dropbox\FAUSTO\SVILUPPI\MSX\CODE\C\MSXgl\engine/src/psg.c:313: loop(i, 3)
    000000BA 0E 00            [ 7]  335 	ld	c, #0x00
    000000BC                        336 00103$:
    000000BC 79               [ 4]  337 	ld	a, c
    000000BD D6 03            [ 7]  338 	sub	a, #0x03
    000000BF D0               [11]  339 	ret	NC
                                    340 ;E:\Dropbox\FAUSTO\SVILUPPI\MSX\CODE\C\MSXgl\engine/src/psg.c:315: g_PSG_Regs.Volume[i] = g_PSG_VolumeBackup[i];
    000000C0 3Er08            [ 7]  341 	ld	a, #<((_g_PSG_Regs + 8))
    000000C2 81               [ 4]  342 	add	a, c
    000000C3 5F               [ 4]  343 	ld	e, a
    000000C4 3Es00            [ 7]  344 	ld	a, #>((_g_PSG_Regs + 8))
    000000C6 CE 00            [ 7]  345 	adc	a, #0x00
    000000C8 57               [ 4]  346 	ld	d, a
    000000C9 21r10r00         [10]  347 	ld	hl, #_g_PSG_VolumeBackup
    000000CC 06 00            [ 7]  348 	ld	b, #0x00
    000000CE 09               [11]  349 	add	hl, bc
    000000CF 7E               [ 7]  350 	ld	a, (hl)
    000000D0 12               [ 7]  351 	ld	(de), a
                                    352 ;E:\Dropbox\FAUSTO\SVILUPPI\MSX\CODE\C\MSXgl\engine/src/psg.c:313: loop(i, 3)
    000000D1 0C               [ 4]  353 	inc	c
                                    354 ;E:\Dropbox\FAUSTO\SVILUPPI\MSX\CODE\C\MSXgl\engine/src/psg.c:327: }
    000000D2 C3rBCr00         [10]  355 	jp	00103$
                                    356 ;E:\Dropbox\FAUSTO\SVILUPPI\MSX\CODE\C\MSXgl\engine/src/psg.c:335: void PSG_Apply() __NAKED __PRESERVES(d, e, iyl, iyh)
                                    357 ;	---------------------------------
                                    358 ; Function PSG_Apply
                                    359 ; ---------------------------------
    000000D5                        360 _PSG_Apply::
                                    361 ;E:\Dropbox\FAUSTO\SVILUPPI\MSX\CODE\C\MSXgl\engine/src/psg.c:403: __endasm;
    000000D5 3Ar07r00         [13]  362 	ld	A, (#_g_PSG_Regs + 7)
    000000D8 E6 3F            [ 7]  363 	and	#0b00111111
    000000DA 47               [ 4]  364 	ld	B, A
    000000DB 3E 07            [ 7]  365 	ld	A, #7
    000000DD D3 A0            [11]  366 	out	(#0xA0), A
    000000DF DB A2            [11]  367 	in	A, (#0xA2)
    000000E1 E6 C0            [ 7]  368 	and	#0b11000000
    000000E3 B0               [ 4]  369 	or	B
    000000E4 32r07r00         [13]  370 	ld	(#_g_PSG_Regs + 7), A
    000000E7 21r00r00         [10]  371 	ld	HL, #_g_PSG_Regs
    000000EA 0E A1            [ 7]  372 	ld	C, #0xA1
    000000EC AF               [ 4]  373 	xor	A
                                    374 	.rept	13
                                    375 	out	(0xA0), A
                                    376 	outi
                                    377 	inc	A
                                    378 	.endm
    000000ED D3 A0            [11]    1 	out	(0xA0), A
    000000EF ED A3            [16]    2 	outi
    000000F1 3C               [ 4]    3 	inc	A
    000000F2 D3 A0            [11]    1 	out	(0xA0), A
    000000F4 ED A3            [16]    2 	outi
    000000F6 3C               [ 4]    3 	inc	A
    000000F7 D3 A0            [11]    1 	out	(0xA0), A
    000000F9 ED A3            [16]    2 	outi
    000000FB 3C               [ 4]    3 	inc	A
    000000FC D3 A0            [11]    1 	out	(0xA0), A
    000000FE ED A3            [16]    2 	outi
    00000100 3C               [ 4]    3 	inc	A
    00000101 D3 A0            [11]    1 	out	(0xA0), A
    00000103 ED A3            [16]    2 	outi
    00000105 3C               [ 4]    3 	inc	A
    00000106 D3 A0            [11]    1 	out	(0xA0), A
    00000108 ED A3            [16]    2 	outi
    0000010A 3C               [ 4]    3 	inc	A
    0000010B D3 A0            [11]    1 	out	(0xA0), A
    0000010D ED A3            [16]    2 	outi
    0000010F 3C               [ 4]    3 	inc	A
    00000110 D3 A0            [11]    1 	out	(0xA0), A
    00000112 ED A3            [16]    2 	outi
    00000114 3C               [ 4]    3 	inc	A
    00000115 D3 A0            [11]    1 	out	(0xA0), A
    00000117 ED A3            [16]    2 	outi
    00000119 3C               [ 4]    3 	inc	A
    0000011A D3 A0            [11]    1 	out	(0xA0), A
    0000011C ED A3            [16]    2 	outi
    0000011E 3C               [ 4]    3 	inc	A
    0000011F D3 A0            [11]    1 	out	(0xA0), A
    00000121 ED A3            [16]    2 	outi
    00000123 3C               [ 4]    3 	inc	A
    00000124 D3 A0            [11]    1 	out	(0xA0), A
    00000126 ED A3            [16]    2 	outi
    00000128 3C               [ 4]    3 	inc	A
    00000129 D3 A0            [11]    1 	out	(0xA0), A
    0000012B ED A3            [16]    2 	outi
    0000012D 3C               [ 4]    3 	inc	A
    0000012E D3 A0            [11]  379 	out	(0xA0), A
    00000130 7E               [ 7]  380 	ld	A, (HL)
    00000131 A7               [ 4]  381 	and	A
    00000132 FAr37r01         [10]  382 	jp	M, PSG_End
    00000135 D3 A1            [11]  383 	out	(0xA1), A
    00000137                        384 	PSG_End:
    00000137 F6 80            [ 7]  385 	or	#0x80
    00000139 77               [ 7]  386 	ld	(HL), A
    0000013A C9               [10]  387 	ret
                                    388 ;E:\Dropbox\FAUSTO\SVILUPPI\MSX\CODE\C\MSXgl\engine/src/psg.c:404: }
                                    389 	.area _CODE
                                    390 	.area _INITIALIZER
                                    391 	.area _CABS (ABS)
